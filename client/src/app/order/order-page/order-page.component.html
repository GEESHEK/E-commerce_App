<div class="container" *ngIf="items.length > 0">
  <div class="row justify-content-center">
    <form [formGroup]="orderForm" class="col-6" (ngSubmit)="orderNow()" autocomplete="off">
      <h2 class="text-center ">Customer Details</h2>
      <hr>
      <div class="mb-3">
        <input type="text" [class.is-invalid]="orderForm.get('firstName')?.errors && orderForm.get('firstName')?.touched"
               class="form-control" formControlName="firstName" placeholder="First Name">
        <div class="invalid-feedback">Please enter a first name</div>
      </div>
      <div class="mb-3">
        <input type="text" [class.is-invalid]="orderForm.get('surname')?.errors && orderForm.get('surname')?.touched"
               class="form-control" formControlName="surname" placeholder="Surname">
        <div class="invalid-feedback">Please enter a surname</div>
      </div>
      <div class="mb-3">
        <input type="email" [class.is-invalid]="orderForm.get('email')?.errors && orderForm.get('email')?.touched"
               class="form-control" formControlName="email" placeholder="Email">
        <div class="invalid-feedback" *ngIf="orderForm.get('email')?.hasError('required')">Please enter a email</div>
        <div class="invalid-feedback" *ngIf="orderForm.get('email')?.hasError('email')">Please enter valid email</div>
      </div>
      <div class="mb-3">
        <input type="text" [class.is-invalid]="orderForm.get('phoneNumber')?.errors && orderForm.get('phoneNumber')?.touched"
               class="form-control" formControlName="phoneNumber" placeholder="Phone Number">
        <div class="invalid-feedback" *ngIf="orderForm.get('phoneNumber')?.hasError('required')">Please enter a phone number</div>
        <div class="invalid-feedback" *ngIf="orderForm.get('phoneNumber')?.hasError('pattern')">Please enter valid phone number</div>
      </div>
      <h2 class="text-center ">Shipping Address</h2>
      <hr>
      <p>Form value: {{orderForm.value | json}}</p>
      <p>Form value: {{orderForm.status | json}}</p>
      <div class="mb-3">
        <input type="text" [class.is-invalid]="orderForm.get('address')?.errors && orderForm.get('address')?.touched"
               class="form-control" formControlName="address" placeholder="Address">
        <div class="invalid-feedback" *ngIf="orderForm.get('address')?.hasError('required')">Please enter an address</div>
      </div>
      <div class="mb-3">
        <input type="text" [class.is-invalid]="orderForm.get('zipCode')?.errors && orderForm.get('zipCode')?.touched"
               class="form-control" formControlName="zipCode" placeholder="ZipCode">
        <div class="invalid-feedback" *ngIf="orderForm.get('zipCode')?.hasError('required')">Please enter a zipcode</div>
      </div>
      <div class="mb-3">
        <input type="text" [class.is-invalid]="orderForm.get('country')?.errors && orderForm.get('country')?.touched"
               class="form-control" formControlName="country" placeholder="Country">
        <div class="invalid-feedback" *ngIf="orderForm.get('country')?.hasError('required')">Please enter a country</div>
      </div>
      <div class="mb-3">
        <input type="text" [class.is-invalid]="orderForm.get('city')?.errors && orderForm.get('city')?.touched"
               class="form-control" formControlName="city" placeholder="City">
        <div class="invalid-feedback" *ngIf="orderForm.get('city')?.hasError('required')">Please enter a zipcode</div>
      </div>
      <h2 class="text-center">Review Items</h2>
      <hr>
      <div class="row" *ngFor="let item of items">
        <div class="col-lg-4 main-photo">
          <img class="mx-auto d-block" src="{{item.photoUrl}}" alt='{{item.brand + " " + item.name + " " + item.reference}}'>
        </div>
        <div class="col-lg-8">
          <h6>{{item.brand + " " + item.name + " " + item.reference}}</h6>
          <h6>{{"Price: " + (item.price | currency: "USD")}}</h6>
          <h6>{{"Color: " + item.dial}}</h6>
          <h6> {{"Qty: " + calculateItemCount(item.id)}}</h6>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-4 text-center">
          <button class="btn btn-success me-2">Order now</button>
        </div>
        <div class="col-8">
          <h4>{{ "Order Total: " + (totalPrice | currency: "USD") }}</h4>
        </div>
      </div>
    </form>
  </div>
</div>
